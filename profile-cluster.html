<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>US Census Viz - Prototype</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.48.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.48.0/mapbox-gl.css' rel='stylesheet' />

    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/3.0.2/topojson.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.10/lodash.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@5/turf.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.jquery.min.js"></script>

    <!-- Custom Scripts -->
    <script src="assets/js/lib/mustache.min.js"></script>
    
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>


<div id='map'></div>

<div id="filter_panel" class="filter-panel">

    <div class="filter-panel-header">

        <ul class="md-tabs">
            <li class="active"><a data-target="#filters" href="#">Records<b id="record-count"></b></a></li>
            <li><a data-target="#bookmarked_items" href="#">Bookmarks<b id="bookmark-count"></b></a></li>
        </ul>

        <div id="toggle_menu" class="button_container">
            <span class="top"></span>
            <span class="top2"></span>
            <span class="middle"></span>
            <span class="bottom"></span>
            <span class="bottom2"></span>
        </div>
          
        <div id="overlay" class="overlay">
            <div id="filterpanel_menu" class="overlay-menu">
              <ul>
                <li data-action="copyurl">Copy URL</li>
                <li data-action="clearbookmarks">Clear Bookmarks</li>
              </ul>
            </div>
        </div>
        
    </div>

    <div id="filters" class="filter-panel-body">

        <div class="filters">

            <!-- Display -->
            <div id="filter_bookmarked"></div>
            
        </div>

        <div class="filters">

            <ul class="accordion">
                
                <!-- Scales -->
                <li class="accordion__item">
                    <input type="checkbox">
                    <i></i>
                    <div class="aitem__head ahbar">
                        <h2 class="ahbar__left">Scales</h2>
                    </div>
                    <div class="aitem__body">
                        <!-- Hardware -->
                        <div id="filter_hardware"></div>
                        
                        <!-- Software -->
                        <div id="filter_software"></div>

                        <!-- Savviness -->
                        <div id="filter_savviness"></div>
                    </div>
                </li>

                <!-- Demographics -->
                <li class="accordion__item">
                    <input type="checkbox">
                    <i></i>
                    <div class="aitem__head ahbar">
                        <h2 class="ahbar__left">Demographics</h2>
                    </div>
                    <div class="aitem__body">
                        <!-- Gender -->
                        <div id="filter_gender"></div>

                        <!-- Age -->
                        <div id="filter_age"></div>

                        <div id="filter_ethnicity"></div>

                        <!-- Children in Home -->
                        <div id="filter_children"></div>


                        <!-- Employment Status -->
                        <div id="filter_employment"></div>

                        <!-- Own / Rent -->
                        <div id="filter_ownrent"></div>


                        <!-- Annual HHI -->
                        <div id="filter_hhi"></div>

                        
                    </div>
                </li>

                <!-- Support & Protection -->
                <li class="accordion__item">
                    <input type="checkbox" checked>
                    <i></i>
                    <div class="aitem__head ahbar">
                        <h2 class="ahbar__left">Support & Protection</h2>
                    </div>
                    <div class="aitem__body">

                        <!-- Tech Support -->
                        <div id="filter_techsupport"></div>

                        <!-- Annual Support Requests -->
                        <div id="filter_annual_support"></div>

                        <!-- Purchased Protection -->
                        <div id="filter_purchased_protection"></div>

                        <div id="filter_num_device_protection"></div>

                        <!-- Perception of Protection -->
                        <div id="filter_perception_protection"></div>

                    </div>

                </li>

                <!-- Zip Code Association -->
                <li class="accordion__item">
                    <input type="checkbox" checked>
                    <i></i>
                    <div class="aitem__head ahbar">
                        <h2 class="ahbar__left">Zip Code Association</h2>
                    </div>
                    <div class="aitem__body">

                        <ul class="md-tabs md-tabs--white">
                            <li class="active"><a data-target="#filter_zip_den" href="#">Population Density</a></li>
                            <li><a data-target="#filter_zip_unemp" href="#">Unemployment Rate</a></li>
                        </ul>
                        
                        <div id="filter_zip_den"></div>

                        <div id="filter_zip_unemp" style="display: none;"></div>

                    </div>
                    
                </li>

            </ul>

        </div>
        
    </div>

    <div id="bookmarked_items" class="filter-panel-body filter-panel-body--bookmark">
        
    </div>

</div>

<div id="logo" class="logo logo--main"></div>

<script>

/**
 * ZCTA wise metric details
 * @type {Object}
 */
var zcta_metrics = {};

/**
 * ZCTA to GEO ID Mapping
 * @type {Object}
 */
var zcta_geoid = {};

/**
 * COUNTY to GEO ID Mapping
 * @type {Object}
 */
var county_geoid = {};

var oProfiles = {};

mapboxgl.accessToken = 'pk.eyJ1IjoiaWFzaGlzaHNpbmdoIiwiYSI6ImNqbHQ2d2JpcTA1cnEzcG9idGl2aTN5MTMifQ.yGUYoyQ4IyAfzl3E2D0ecA';


</script>

<!-- Popup Template -->
<script id="popup_large_profile_tpl" type="text/html"> <!-- x-tmpl-mustache -->

<div class="popup popup--large popup--listing {{#isActiveProfile}}popup--activeprofile{{/isActiveProfile}}">
    {{#profiles}}
    <div class="profilepanel {{#isActiveProfile}}profilepanel--active{{/isActiveProfile}}">
        <div class="profilepanel__toolbar pbar profilepanel--handle">
            <h3 class="pbar__left">ID{{ID}}: {{First Name}}</h3>
            <h3 class="pbar__center">{{Employment}}{{#_title}}, {{.}}{{/_title}}</h3>
            <div class="pbar__right">
                <button class="profilepanel__bookmark {{#_isBookmarked}}profilepanel__bookmark--active{{/_isBookmarked}}" data-id="{{ID}}">
                    <svg viewBox="0 0 24 24" width="24px" height="24px" x="0" y="0" preserveAspectRatio="xMinYMin meet" class="artdeco-icon" focusable="false">
                        <path d="M18,2H6A1,1,0,0,0,5,3V23l7-4.72L19,23V3A1,1,0,0,0,18,2ZM7,19.36V4H17V19.34L12,16Z" class="large-icon" style="fill: currentColor"></path>
                    </svg>
                </button>
            </div>
        </div>
        <div class="profilepanel__head phead profilepanel--handle">
            <div class="phead__img profile-icon profile-icon--large" style="background-image:url('{{_avatar}}');"></div>
            <div class="phead__attributes">
                <ul>
                    <li>{{Gender}}, {{Age}}{{#Ethnicity}}, {{.}} {{/Ethnicity}}</li>
                    <li>{{Marital}} {{#ownType}}, {{.}} {{/ownType}}</li>
                    <li>{{Employment Status}}</li>
                    <li>{{Children in Home}} Children in Home</li>
                    <li>{{_phone_choice}}</li>
                    <li>{{Education}}</li>
                    <li>{{City}}{{#State}}, {{.}}{{/State}}</li>
                    <li>{{HHI}}</li>
                </ul>
            </div>
        </div>
        <div class="profilepanel__body pbody">
            <ul class="accordion">
                <li class="accordion__item">
                    <input type="checkbox" checked>
                    <i></i>
                    <div class="aitem__head ahbar">
                        <h2 class="ahbar__left">Hardware Adoption</h2>
                        <h2 class="ahbar__right">{{Hardware Score}}</h2>
                    </div>
                    <div class="aitem__body">
                        <ul class="list list--inline">
                            <li>TVs ({{TVs}})</li>
                            <li>DVRs ({{DVRs}})</li>
                            <li>Game Console ({{Game Console}})</li>
                            <li>Desktops ({{Desktops}})</li>
                            <li>Laptops ({{Laptops}})</li>
                            <li>Tablets ({{Tablets}})</li>
                            <li>Network Router ({{Network Router}})</li>
                            <li>Printer ({{Printer}})</li>
                            <li>Wearables ({{Wearables}})</li>
                            <li>Smartphones ({{Smartphones}})</li>
                            <li>Handhelds ({{Handhelds}})</li>
                            <li>Home Automation ({{Home Automation}})</li>
                            <li>Home Hub ({{Home Hub}})</li>
                            <li>Home Appliances ({{Home Appliances}})</li>
                        </ul>
                    </div>
                </li>
                <li class="accordion__item">
                    <input type="checkbox" checked>
                    <i></i>
                    <div class="aitem__head ahbar">
                        <h2 class="ahbar__left">Software Score</h2>
                        <h2 class="ahbar__right">{{Software Score}}</h2>
                    </div>
                    <div class="aitem__body">
                        <div class="colflex">
                            <div>
                                <h4>Hourly/Daily</h4>
                                <ul class="list">
                                    <li>TBD</li>
                                    <li>Social Media</li>
                                    <li>Social Media</li>
                                    <li>Social Media</li>
                                </ul>
                            </div>
                            <div>
                                <h4>Weekly</h4>
                                <ul class="list">
                                    <li>TBD</li>
                                </ul>
                            </div>
                            <div>
                                <h4>Monthly/Yearly</h4>
                                <ul class="list">
                                    <li>TBD</li>
                                    <li>Social Media</li>
                                    <li>Social Media</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="accordion__item">
                    <input type="checkbox" checked>
                    <i></i>
                    <div class="aitem__head ahbar">
                        <h2 class="ahbar__left">Tech Savviness</h2>
                        <h2 class="ahbar__right">{{Savviness Index}}</h2>
                    </div>
                    <div class="aitem__body">
                        <ul class="list list--block">
                            {{#tsp}}
                            <li>{{.}}</li>
                            {{/tsp}}
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
        <div class="profilepanel__footer pbar">
            <button class="pbar__full profilepanel__back">View List</button>
        </div>
    </div>
    {{/profiles}}
</div>

</script>

<script src="assets/js/util.js"></script>
<script src="assets/js/datamodel.js"></script>
<script src="assets/js/filter.js"></script>
<script src="assets/js/popup.js"></script>
<script src="assets/js/aux.js"></script>


</body>
</html>